### Title: Understanding, Detecting and Localizing Partial Failures in Large System Software (NSDI'20)
#### Summary
A program can fail partially with some components still working. Such partial failures are common and severe in practice. The paper first conducts a systematic study on 100 real-world partial failures from five large open-sourced systems to study their characteristics. It finds that nearly half of the partial failures cause some functionality to be stuck or become “zombie” with undefined failure semantics; and most of the partial failures are triggered by environmental context. The authors propose a monitoring process extension (watchdog), which concurrently executes a mimic vulnerable code component of the main program in the synchronized context, to detect partial failures. They design and implement OmegaGen to automatically construct mimic checkers and watchdogs. OmegaGen first identifies long-running code regions, e.g., loops, by walking the control flow, to ensure only relevant long-life code is checked. OmegaGen then further selects some vulnerable instructions to narrow down the scope of the monitoring. Other irrelevant code is thus removed based on an iteratively call graph analysis. The reduced program reserves the structures, e.g., call chain, of the main program. And it is then encapsulated into watchdogs. The execution context of the mimic checkers is guaranteed by watchdog hooks in the main program. Therefore, faults in the mimic reduced program are reported and then caught by the liveness and safety violation checks of the watchdogs. To isolate the watchdogs from the main program, methods like context replication and I/O redirection are implemented in OmegaGen. The evaluation on six complex systems compares the watchdogs generated by OmegaGen with other three baseline detectors, including state-of-the-art client checker (Panorama), probe checker (Palcon), and industry tools (Signal and Resource). The results show that, the watchdogs detected 20 out of 22 cases with a median detection time of 4.2 seconds, which outperforms other tools. Also, the watchdogs can localize 11 out of the 20 detected cases, and such fine-granularity localization is not capable in other tools. Further, the authors synthesize 16 faults into the latest ZooKeeper and the watchdogs can detect 16 of them. In addition, the watchdogs have few side effects, lower false alarms, negligible runtime overhead in throughput, CPU, and memory.
